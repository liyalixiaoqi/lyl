var T=Object.defineProperty,k=Object.defineProperties;var y=Object.getOwnPropertyDescriptors;var d=Object.getOwnPropertySymbols;var N=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable;var p=(e,s,r)=>s in e?T(e,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[s]=r,m=(e,s)=>{for(var r in s||(s={}))N.call(s,r)&&p(e,r,s[r]);if(d)for(var r of d(s))j.call(s,r)&&p(e,r,s[r]);return e},l=(e,s)=>k(e,y(s));var h=(e,s,r)=>new Promise((n,o)=>{var t=a=>{try{c(r.next(a))}catch(i){o(i)}},S=a=>{try{c(r.throw(a))}catch(i){o(i)}},c=a=>a.done?n(a.value):Promise.resolve(a.value).then(t,S);c((r=r.apply(e,s)).next())});import{c as q,a as v,b as w,d as P}from"./vendor-5d9d0e.js";import{E as u}from"./element-plus-91bf7a.js";const R=q();R.use(v());const f=e=>{switch(e){case 200:return"请求成功";case 401:return"未授权，请登录";case 403:return"拒绝访问";case 404:return"请求地址错误";case 500:return"服务器错误";case 502:return"网关错误";case 503:return"服务不可用";case 504:return"网关超时";default:return"未知错误"}},g=w.create({baseURL:"/api",timeout:5e3});g.interceptors.request.use(e=>e,e=>Promise.reject(e));g.interceptors.response.use(e=>(e.status===200||u.error(f(e.status)),e),e=>{var s;return u.error(f(((s=e.response)==null?void 0:s.status)||500)),Promise.reject(e)});const b=e=>{const s=e;return new Promise((r,n)=>{g.request(s).then(o=>{const t=o.data;t.code!=200?(u({message:t.message,type:"error"}),n(t.message)):(u({message:t.message,type:"success"}),r(t.data))})})},C=(e,s,r)=>b(l(m({url:e,params:s},r),{method:"GET"})),E=(e,s,r)=>b(l(m({url:e,data:s},r),{method:"POST"})),I=e=>E("/login",e,{}),G=P("userInfo",{state:()=>({userName:"",userRole:"",userToken:""}),actions:{login(e){return h(this,null,function*(){try{const s=yield I(e);return console.log(s,e,"res"),this.userName=s.userName,this.userRole=s.userRole,this.userToken=s.userToken,Promise.resolve(s)}catch(s){return console.log(s),Promise.reject(s)}})},logout(){localStorage.removeItem("userInfo"),this.userName="",this.userRole="",this.userToken=""}},persist:{enabled:!0,strategies:[{key:"user",storage:localStorage,paths:["userName","userRole","userToken"]}]}}),x=P("breadcrumb",{state:()=>({parentRoute:[]}),actions:{setParentRoute(e){this.parentRoute=e}}});function L(){return x(R)}export{L as a,C as g,R as p,G as u};
