var b=Object.defineProperty,k=Object.defineProperties;var y=Object.getOwnPropertyDescriptors;var d=Object.getOwnPropertySymbols;var E=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable;var p=(e,s,r)=>s in e?b(e,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[s]=r,m=(e,s)=>{for(var r in s||(s={}))E.call(s,r)&&p(e,r,s[r]);if(d)for(var r of d(s))I.call(s,r)&&p(e,r,s[r]);return e},l=(e,s)=>k(e,y(s));var h=(e,s,r)=>new Promise((n,o)=>{var t=a=>{try{c(r.next(a))}catch(i){o(i)}},T=a=>{try{c(r.throw(a))}catch(i){o(i)}},c=a=>a.done?n(a.value):Promise.resolve(a.value).then(t,T);c((r=r.apply(e,s)).next())});import{c as N,a as j,b as q,d as f}from"./vendor-2eaabd.js";import{E as u}from"./element-plus-08231d.js";const R=N();R.use(j());const P=e=>{switch(e){case 200:return"请求成功";case 401:return"未授权，请登录";case 403:return"拒绝访问";case 404:return"请求地址错误";case 500:return"服务器错误";case 502:return"网关错误";case 503:return"服务不可用";case 504:return"网关超时";default:return"未知错误"}},g=q.create({baseURL:"/apiVITE_APP_BASE_API=/lyl/mock/api",timeout:5e3});g.interceptors.request.use(e=>e,e=>Promise.reject(e));g.interceptors.response.use(e=>(e.status===200||u.error(P(e.status)),e),e=>{var s;return u.error(P(((s=e.response)==null?void 0:s.status)||500)),Promise.reject(e)});const S=e=>{const s=e;return new Promise((r,n)=>{g.request(s).then(o=>{const t=o.data;t.code!=200?(u({message:t.message,type:"error"}),n(t.message)):(u({message:t.message,type:"success"}),r(t.data))})})},M=(e,s,r)=>S(l(m({url:e,params:s},r),{method:"GET"})),v=(e,s,r)=>S(l(m({url:e,data:s},r),{method:"POST"})),w=e=>v("/login",e,{}),U=f("userInfo",{state:()=>({userName:"",userRole:"",userToken:""}),actions:{login(e){return h(this,null,function*(){try{const s=yield w(e);return console.log(s,e,"res"),this.userName=s.userName,this.userRole=s.userRole,this.userToken=s.userToken,Promise.resolve(s)}catch(s){return console.log(s),Promise.reject(s)}})},logout(){localStorage.removeItem("userInfo"),this.userName="",this.userRole="",this.userToken=""}},persist:{enabled:!0,strategies:[{key:"user",storage:localStorage,paths:["userName","userRole","userToken"]}]}}),A=f("breadcrumb",{state:()=>({parentRoute:[]}),actions:{setParentRoute(e){this.parentRoute=e}}});function C(){return A(R)}export{C as a,M as g,R as p,U as u};
